# ===========================================================================
#   objcontainer.py ---------------------------------------------------------
# ===========================================================================

#   class -------------------------------------------------------------------
# ---------------------------------------------------------------------------
class ObjContainer(object):
    
    #   method --------------------------------------------------------------
    # -----------------------------------------------------------------------  
    def __init__(self, obj=None, obj_flag=True, obj_copy=False):
        self._obj_flag = obj_flag
        self._obj_copy = obj_copy

        self.obj = obj
        
    #   method --------------------------------------------------------------
    # -----------------------------------------------------------------------
    @property
    def obj(self):
        return self._obj

    #   method --------------------------------------------------------------
    # -----------------------------------------------------------------------
    @obj.setter
    def obj(self, obj):
        self._obj = obj
        if self._obj_copy:
            self.set_clone()
        else:
            self._clone = None

    #   method --------------------------------------------------------------
    # -----------------------------------------------------------------------
    @property
    def clone(self):
        return self._clone

    #   method --------------------------------------------------------------
    # -----------------------------------------------------------------------
    @clone.setter
    def clone(self, clone):
        self._clone = clone

    #   method --------------------------------------------------------------
    # -----------------------------------------------------------------------
    @property
    def data(self):
        return self.obj if self._obj_flag else self.clone

    #   method --------------------------------------------------------------
    # -----------------------------------------------------------------------
    def set_obj_to_copy(self):
        self._obj_flag = False

    #   method --------------------------------------------------------------
    # -----------------------------------------------------------------------
    def set_clone(self):
        clone_method = getattr(self.obj, "copy", None)
        self.clone = clone_method() if callable(clone_method) else self.obj

    #   method --------------------------------------------------------------
    # -----------------------------------------------------------------------
    def __repr__(self):
        return "<obj: {}, clone: {} - (default: {})>".format(type(self.obj), type(self.clone), "obj" if self._obj_flag else "clone")